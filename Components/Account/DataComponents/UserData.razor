@namespace TrouvailleFrontend.Components.Account

@inherits UserChanger

<div class='user-data @(_isChangeDone? " " : "changing")'>
    <h4>Personal Data</h4>
    <EditForm EditContext="@_context" OnSubmit="SubmitAsync">
        <DataAnnotationsValidator />

        <InputText id="first-name" @bind-Value=_userData.FirstName @bind-Value-oninput=_userData.FirstName
            placeholder="First Name" disabled="@_isChangeDone" />
        <InputText id="last-name" @bind-Value=_userData.LastName @bind-Value-oninput=_userData.LastName
            placeholder="Surname" disabled="@_isChangeDone" />
        <InputText type="phone" id="phone-number" @bind-Value=_userData.PhoneNumber class="not-required"
            @bind-Value-oninput=_userData.PhoneNumber placeholder="Phonenumber" disabled="@_isChangeDone" />

        <ValidationMessage For="@(() => _userData.FirstName)"/>
        <ValidationMessage For="@(() => _userData.LastName)"/>
        <ValidationMessage For="@(() => _userData.PhoneNumber)"/>

        <button type="submit" class="button-style button-change">@_buttonText</button>
        @if (!_isChangeDone)
        {
            <button type="button" class="button-style button-change" @onclick=ChangeState>Cancel</button>
        }
    </EditForm>
</div>