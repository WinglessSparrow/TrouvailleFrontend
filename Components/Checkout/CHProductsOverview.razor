@namespace TrouvailleFrontend.Components.Checkout

@using TrouvailleFrontend.Shared.Models
@using TrouvailleFrontend.Components.Shared

@* TODO: SEPARATE MODEL FOR THE PRODUCT AND CART ITEM *@

<div>
    <CollapseAccordion Name="Products Overview">
        @if (Products != null && ItemData != null)
        {
            @for (int i = 0; i < Products.Count(); i++)
            {
                <ProductView Name=@Products[i].Name Price=@Products[i].Price Stock=@Products[i].InStock
            Cardinality=@ItemData[i].Cardinality />
            }
        }
    </CollapseAccordion>
    <div class="products-overview-under">
        <div class="total">
            <p>Total: @_totalPrice</p>
        </div>
    </div>
</div>

@code{
    private string _totalPrice;
    [Parameter]
    public double TotalPrice { get; set; }
    [Parameter]
    public List<ProductModel> Products { get; set; }
    [Parameter]
    public List<ShoppingCartItemModel> ItemData { get; set; }
        
    protected override void OnParametersSet()
    {
        _totalPrice = String.Format("{0:C}", TotalPrice);
    }
}
